'use strict';(function(){// dev
    // let dir = '';
    // let path = '/tw/dsc/solution/WB002554/WB00255401_Issue'.split('/');
    // let hash = '#contact';
    // final
    var a=location.pathname.split('/'),b=location.hash,c=a[a.length-2],d=a[a.length-1].replace(/(.html|.htm)/g,''),e=document.querySelector('.header-box header');null===e||new Vue({el:'#submenu',data:{results:[],currentPage:'',activeIndex:0,isActive:!1},computed:{submenu:function a(){return document.querySelector('.page-submenu');}},created:function a(){e.insertAdjacentHTML('beforeend','<div id="submenu"></div>');},mounted:function b(){var a=this;this.getData(),document.querySelector('body').addEventListener('touchstart',function(b){return a.closeDropdownHandler(b);});},beforeDestroy:function a(){document.querySelector('body').removeEventListener('touchstart'),window.removeEventListener('scroll',this.scrollHandler),window.removeEventListener('resize',this.resizeHandler);},methods:{// 取得選單內容
        getData:function b(){var a=this;fetch('/tw/dsc/dev/assets/submenu/submenu.json').then(function(a){return a.json();}).then(function(b){a.results=b.filter(function(a){return a.id===c;});a.results.length&&(// 依據選單高度設定main上方間距
            a.setActiveIndex(),a.isActive=!0,window.addEventListener('load',a.resizeHandler),window.addEventListener('resize',a.resizeHandler),a.results[0].anchors&&window.addEventListener('scroll',a.scrollHandler));});},// 設定目前頁面名稱(不含首頁)
        setCurrentPage:function b(a){a&&!a.match(/首頁$/)&&(this.currentPage=a);},// 設定目前選單樣式
        setActiveIndex:function c(){var a=this;this.results[0].menus.forEach(function(c,e){if(c.url===d||c.url===d+b)a.activeIndex=e,a.setCurrentPage(c.text);else if(c.dropdowns)return c.dropdowns.some(function(c){if(c.url===d+b)return a.activeIndex=e,a.setCurrentPage(c.text),!0;});});},// 設定標題文字
        setTitle:function b(a){return this.currentPage?a+' / '+this.currentPage:a;},// 判斷連結開啟方式
        linkTo:function e(a,b){var c=a.split('#');if(''===c[0]||c[0]===d){var f=$('#'+c[1]);if(f.length){var g=f.offset().top;$('html, body').animate({scrollTop:g-50});}}else b?window.open(a,b):window.open(a,'_self');},getScrollPos:function f(a,b,c){if($(a).length){var d=$(window).scrollTop(),e=$(a).offset().top-b;d>=e&&c();}},scrollHandler:function d(){var a=this,b=this.results[0].anchors,c=this.submenu.offsetHeight;b.forEach(function(b){a.getScrollPos(b.url,c,function(){$(a.submenu).addClass('active').find('.page-submenu-list > li').removeClass('active').eq(b.index).addClass('active');});});},openDropdown:function b(a){$(a.target).parents('li').addClass('is-open').siblings().removeClass('is-open');},closeDropdownHandler:function b(a){1!==$(a.target).parents('.page-submenubox').length&&$('.page-submenu-list > li').removeClass('is-open');},resizeHandler:function c(){var a=this.submenu.offsetHeight,b=document.querySelector('main');null===b||(b.style.paddingTop=50<a?'50px':0);}},template:'\n            <div class="page-submenubox" :class="{active:isActive}">\n                <div class="page-submenu">\n                    <div class="container">\n                        <template v-for="result in results">\n                            <h2>{{setTitle(result.title)}}</h2>\n                            <ul class="page-submenu-list">\n                                <li v-for="(menu, index) in result.menus">\n                                    <span :class="{active:index===activeIndex}">\n                                        <a :href="menu.url" @click.prevent="linkTo(menu.url, menu.target)" @touchstart="openDropdown">{{menu.text}}</a>\n                                    </span>\n                                    <ul v-if="menu.dropdowns" class="page-submenu-dropdown">\n                                        <li v-for="dropdown in menu.dropdowns">\n                                            <a :href="dropdown.url" @click.prevent="linkTo(dropdown.url, dropdown.target)">{{dropdown.text}}</a>\n                                        </li>\n                                    </ul>\n                                </li>\n                            </ul>\n                        </template>\n                    </div>\n                </div>\n            </div>\n        '});})();
    