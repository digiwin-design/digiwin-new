'use strict';

module.exports = {
    props: ['accordion'],
    computed: {
        isMobile: function isMobile() {
            return store.state.isMobile;
        }
    },
    watch: {
        isMobile: function isMobile(val) {
            if (val) {
                this.destroyAccordion();
            } else {
                this.initAccordion();
            }
        }
    },
    methods: {
        btnClass: function btnClass(href) {
            return href === '#contact';
        },
        slideToggle: function slideToggle(event) {
            if (this.isMobile) {
                $(event.target).toggleClass('active').next().slideToggle();
            }
        },
        initAccordion: function initAccordion() {
            $(this.$refs.accordion).find('h2').removeClass('active');
            $(this.$refs.accordion).accordion({
                collapsible: true,
                heightStyle: 'content'
            });
        },
        destroyAccordion: function destroyAccordion() {
            $(this.$refs.accordion).find('h2').eq(0).addClass('active');
            $(this.$refs.accordion).accordion('destroy');
        }
    },
    mounted: function mounted() {
        if (!this.isMobile) {
            this.initAccordion();
        } else {
            $(this.$refs.accordion).find('h2').eq(0).addClass('active');
        }
    }
};